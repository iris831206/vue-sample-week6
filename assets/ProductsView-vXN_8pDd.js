import{P as k}from"./PaginationComponents-GELMNGXN.js";import{c as P}from"./cartStore-7byXLb4e.js";import{_ as w,u as C,m as I,g as l,o as e,c as o,h as c,b as t,i as b,F as _,r as m,d as r,t as a,e as v}from"./index-qbQ82ICj.js";import{S as L}from"./sweetalert2.all-NJpvPn2u.js";var E={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"iris831206",BASE_URL:"/vue-sample-week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:V,VITE_API_PATH:T}=E,A={data(){return{products:[],isLoading:!1,status:{loadingItem:""},pagination:{},currentPage:1,categories:["香氛","保濕","潔淨"]}},methods:{getData(d=1){this.currentPage=d;const{category:p=""}=this.$route.query;this.isLoading=!0;const u=`${V}/api/${T}/products?category=${p}&page=${d}`;C.get(u).then(i=>{this.products=i.data.products,this.pagination=i.data.pagination,this.isLoading=!1}).catch(i=>{this.isLoading=!1,L.fire({icon:"error",title:i.response.data.message,showConfirmButton:!1,timer:1500})})},getProduct(d){this.$router.push(`product/${d}`)},...I(P,["addToCart"])},components:{PaginationComponents:k},watch:{"$route.query":{handler(){this.getData()},deep:!0}},mounted(){this.getData()}},D={class:"container mt-md-5 mt-3 mb-7"},$={class:"row"},R={class:"col-md-3"},S={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3 sticky-top",id:"accordionExample"},O={class:"card border-0"},j=t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("div",{class:"d-flex justify-content-between align-items-center pe-1"},[t("h4",{class:"mb-0"}," 商品種類 "),t("i",{class:"fas fa-chevron-down"})])],-1),B={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},N={class:"card-body py-0"},U={class:"list-unstyled"},q={class:"col-md-9"},F={class:"row"},H={class:"card border-0 mb- position-relative position-relative mx-2 h-100"},z=["src","alt"],M={class:"card-body p-0"},G={class:"mt-3"},J={class:"card-text text-muted mb-0"},K={class:"mb-0"},Q={class:"badge bg-success"},W={class:"mb-0"},X={class:"card-text mb-2 d-flex justify-content-end align-items-end"},Y={key:0},Z={class:"mb-0 h5"},tt={key:1},st={class:"mb-0 text-secondary"},et={class:"mb-0 h5"},ot={class:"card-footer bg-transparent border-dark"},nt={class:"d-grid gap-2 d-lg-block d-lg-flex justify-content-lg-between"},at=["disabled","onClick"],dt={key:0,class:"spinner-border spinner-grow-sm"},it=["onClick","disabled"],ct={key:0,class:"spinner-border spinner-grow-sm"},rt={class:"d-flex justify-content-center"};function lt(d,p,u,i,n,g){const f=l("VueLoading"),h=l("RouterLink"),y=l("PaginationComponents");return e(),o(_,null,[c(f,{active:n.isLoading,"z-index":1060},null,8,["active"]),t("div",D,[t("div",$,[t("div",R,[t("div",S,[t("div",O,[j,t("div",B,[t("div",N,[t("ul",U,[t("li",null,[c(h,{to:"/products",class:"py-2 d-block text-muted text-decoration-none"},{default:b(()=>[r(" 全部 ")]),_:1})]),(e(!0),o(_,null,m(n.categories,s=>(e(),o("li",{key:s},[c(h,{to:`/products?category=${s}`,class:"py-2 d-block text-muted text-decoration-none"},{default:b(()=>[r(a(s),1)]),_:2},1032,["to"])]))),128))])])])])])]),t("div",q,[t("div",F,[(e(!0),o(_,null,m(n.products,s=>(e(),o("div",{class:"col-lg-4 mb-5",key:s.id},[t("div",H,[t("img",{src:s.imageUrl,class:"card-img-top rounded-0",alt:s.title,style:{"object-fit":"cover"}},null,8,z),t("div",M,[t("div",G,[t("div",J,[t("h4",K,a(s.title),1),t("span",Q,a(s.category),1),t("p",W,a(s.description),1)])])]),t("div",X,[s.origin_price===s.price?(e(),o("div",Y,[t("p",Z,"$"+a(s.price)+" 元",1)])):(e(),o("div",tt,[t("p",st,[t("del",null,"$"+a(s.origin_price)+" 元",1)]),t("p",et,"$"+a(s.price)+" 元",1)]))]),t("div",ot,[t("div",nt,[t("button",{type:"button",class:"btn btn-outline-secondary",disabled:n.status.loadingItem===s.id||!s.is_enabled,onClick:x=>g.getProduct(s.id)},[n.status.loadingItem===s.id?(e(),o("span",dt)):v("",!0),r(" 查看更多 ")],8,at),t("button",{type:"button",class:"btn btn-outline-danger",onClick:x=>d.addToCart(s.id),disabled:n.status.loadingItem===s.id||!s.is_enabled},[n.status.loadingItem===s.id?(e(),o("span",ct)):v("",!0),r(" 加到購物車 ")],8,it)])])])]))),128))]),t("nav",rt,[c(y,{pages:n.pagination,onEmitPages:g.getData},null,8,["pages","onEmitPages"])])])])])],64)}const ht=w(A,[["render",lt]]);export{ht as default};
